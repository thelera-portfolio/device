var writeUsButton = document.querySelector(".contacts__button"), writeMessageModal = document.querySelector(".write-message-modal"), modalCloseButton = document.querySelector(".modal-close-button_write-message-position"), modalSentButton = document.querySelector(".write-message-modal-form__button"), modalLoginInput = writeMessageModal.querySelector("[name=user-name]"), modalEmailInput = writeMessageModal.querySelector("[name=user-email]"), modalTextInput = writeMessageModal.querySelector("[name=user-text]"), modalForm = writeMessageModal.querySelector(".write-message-modal-form"), overlay = document.querySelector(".overlay"), modalLoginStorage = "", modalEmailStorage = "", modalTextStorage = "", isStorageSupport = !0, mapModal = document.querySelector(".map-modal"), mapModalLink = document.querySelector(".contacts__link"), mapModalCloseButton = document.querySelector(".modal-close-button_map-position"); overlay = document.querySelector(".overlay"); try { modalLoginStorage = localStorage.getItem(modalLoginInput), modalEmailStorage = localStorage.getItem(modalEmailInput), modalTextStorage = localStorage.getItem(modalTextInput) } catch (e) { console.log(e), isStorageSupport = !1 } writeUsButton.addEventListener("click", function (e) { e.preventDefault(), writeMessageModal.classList.add("modal-show"), overlay.classList.add("overlay-show"), modalLoginInput.focus(), modalLoginStorage && (modalLoginInput.value = modalLoginStorage, modalEmailInput.focus()), modalEmailStorage && (modalEmailInput.value = modalEmailStorage, modalTextInput.focus()), modalTextStorage && (modalTextInput.value = modalTextStorage, modalSentButton.focus()) }), modalForm.addEventListener("submit", function (e) { modalLoginInput.value && modalEmailInput.value && modalTextInput.value ? isStorageSupport && (localStorage.setItem(modalLoginInput, modalLoginInput.value), localStorage.setItem(modalEmailInput, modalEmailInput.value), localStorage.setItem(modalTextInput, modalTextInput.value)) : (e.preventDefault(), modalLoginInput.setAttribute("required", !0), modalEmailInput.setAttribute("required", !0), modalTextInput.setAttribute("required", !0), writeMessageModal.classList.remove("modal-error"), writeMessageModal.offsetWidth = writeMessageModal.offsetWidth, writeMessageModal.classList.add("modal-error")) }), modalCloseButton.addEventListener("click", function (e) { e.preventDefault(), writeMessageModal.classList.remove("modal-show"), writeMessageModal.classList.remove("modal-error"), overlay.classList.remove("overlay-show") }), window.addEventListener("keydown", function (e) { 27 === e.keyCode && writeMessageModal.classList.contains("modal-show") && (e.preventDefault(), writeMessageModal.classList.remove("modal-show"), writeMessageModal.classList.remove("modal-error"), overlay.classList.remove("overlay-show")) }), overlay.addEventListener("click", function (e) { e.preventDefault(), writeMessageModal.classList.remove("modal-show"), writeMessageModal.classList.remove("modal-error"), overlay.classList.remove("overlay-show") }), mapModalLink.addEventListener("click", function (e) { e.preventDefault(), mapModal.classList.add("map-show"), overlay.classList.add("overlay-show") }), mapModalCloseButton.addEventListener("click", function (e) { e.preventDefault(), mapModal.classList.remove("map-show"), overlay.classList.remove("overlay-show") }), window.addEventListener("keydown", function (e) { 27 === e.keyCode && mapModal.classList.contains("map-show") && (e.preventDefault(), mapModal.classList.remove("map-show"), overlay.classList.remove("overlay-show")) }), overlay.addEventListener("click", function (e) { e.preventDefault(), mapModal.classList.remove("map-show"), overlay.classList.remove("overlay-show") });